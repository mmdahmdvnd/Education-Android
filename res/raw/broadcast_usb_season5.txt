import android.annotation.TargetApi;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Build;
import android.widget.Toast;


//ایجاد کلاس با نام دلخواه Broadcast_usb و مشتق کردن آن از BroadcastReceiver :
public class Broadcast_usb extends BroadcastReceiver {


//تنها متد ضروری این کلاس(کلاسی که از "برودکست ریسیور" مشتق شده است) متد ()onReceive میباشد(کدی که درون متد ()onReceive قرار گیرد بعنوان عملی که برودکست ریسیور باید انجام دهد اجرا میشود مثلا میتوان یک Toast را اجرا کند که یک پیام را میدهد) . در اینجا درون متد ()onReceive یک نوتیفیکیشن قرار گرفته که یک تیتر و یک متن با یک آیکن را در تولبار دستگاه نشان میدهد  :
    @Override
    public void onReceive(Context context, Intent intent) {

//نوتیفیکیشن جزء سرویسهای اندروید است پس دسترسی به آن طبق کار با سرویسها انجام میشود :
        NotificationManager nm=(NotificationManager) context.getSystemService(Main.NOTIFICATION_SERVICE);
        Notification noti = new Notification.Builder(context)
                .setContentTitle("USB is connected!")
                .setContentText("USB is connected!")
                .setSmallIcon(R.drawable.icon)
                .build();

        nm.notify(1,noti);

 ***کد بالا مربوط به Build شدن نوتیفیکیشن ، تنها در API16 به بالا قابل اجرا است(برودکست ریسیور به قوت خود باقیست) ***
    }
}
